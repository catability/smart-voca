# 구현 계획서

**작성일**: 2025-10-20  
**문서명**: 251020_구현 - 구현 계획서 v1.0.md  
**프로젝트**: 스마트 단어장 (Smart Vocabulary Builder)  
**작성자**: AI Software Student Team

---

## 1. 개요

본 문서는 Smart Vocab Builder의 구현 계획을 수립한 문서입니다.
설계 문서(데이터베이스, 아키텍처, 화면)를 기반으로 구현 순서, 각 단계별 작업 내용, 예상 소요 기간을 정의합니다.

---

## 2. 기술 스택 및 개발 환경

### 2.1 필수 기술 스택

| 구분 | 기술/라이브러리 | 버전 | 용도 |
|------|----------------|------|------|
| 언어 | Python | 3.10+ | 메인 개발 언어 |
| GUI | PyQt5 | 5.15.9 | 사용자 인터페이스 |
| 데이터베이스 | SQLite3 | 내장 | 데이터 저장 |
| 차트 | matplotlib | 3.7.1 | 통계 시각화 |
| 데이터 처리 | pandas | 2.0.0 | CSV 처리 |
| 로깅 | logging | 내장 | 오류 추적 |
| 패키징 | PyInstaller | 5.13.0 | exe 파일 생성 |

### 2.2 개발 환경 설정

**디렉토리 구조**:
```
smart_vocab_builder/
├── main.py
├── config.py
├── requirements.txt
├── database/
├── models/
├── controllers/
├── views/
├── utils/
├── resources/
├── logs/
└── tests/
```

**requirements.txt**:
```
PyQt5==5.15.9
matplotlib==3.7.1
pandas==2.0.0
PyInstaller==5.13.0
```

---

## 3. 구현 단계 및 순서

### Phase 1: 기반 구조 (1-2일)

**목표**: 프로젝트 기본 구조 및 공통 모듈 구현

#### 1.1 프로젝트 초기화
- 디렉토리 구조 생성
- `requirements.txt` 작성 및 라이브러리 설치
- `.gitignore` 작성 (선택)

#### 1.2 config.py 구현
- 전역 상수 정의
  - 데이터베이스 파일 경로
  - 로그 파일 경로
  - 기본 설정값
  - 테마 색상 상수

#### 1.3 database/ 모듈 구현
- `database/__init__.py`: 패키지 초기화
- `database/db_connection.py`: 
  - DBConnection 클래스 (Singleton 패턴)
  - `get_instance()`: 싱글톤 인스턴스 반환
  - `connect()`: DB 연결
  - `close()`: DB 연결 종료
  - `execute()`: 쿼리 실행
  - `commit()`: 트랜잭션 커밋
- `database/schema.sql`: 8개 테이블 CREATE 문
- `database/init_data.sql`: user_settings 초기 데이터

#### 1.4 utils/ 모듈 구현
- `utils/__init__.py`: 패키지 초기화
- `utils/logger.py`:
  - `setup_logger()`: 로거 설정 (파일 + 콘솔)
  - 로그 레벨: DEBUG (개발), INFO (배포)
  - 파일 로테이션: 10MB 제한, 최대 3개 백업
- `utils/validators.py`:
  - `validate_word()`: 단어 입력 검증
  - `validate_meaning()`: 뜻 입력 검증
  - `validate_memo()`: 메모 길이 검증
- `utils/datetime_helper.py`:
  - `get_current_datetime()`: ISO 8601 형식 현재 시간
  - `format_date()`: 날짜 포맷팅
  - `calculate_next_review()`: 복습 날짜 계산 (향후 기능)
- `utils/csv_handler.py`:
  - `import_csv()`: CSV 파일 파싱 (pandas 사용)
  - `export_csv()`: 데이터를 CSV로 저장
  - 인코딩: UTF-8, 헤더 필수

**산출물**:
- 실행 가능한 기본 구조
- DB 파일 자동 생성 확인
- 로그 파일 생성 확인

---

### Phase 2: 데이터 계층 (2-3일)

**목표**: Model 클래스 구현 (DB CRUD)

#### 2.1 base_model.py 구현
- BaseModel 클래스
  - `__init__()`: DBConnection 인스턴스 가져오기
  - `execute_query()`: SELECT 쿼리 실행
  - `execute_update()`: INSERT/UPDATE/DELETE 실행
  - `get_last_insert_id()`: 마지막 삽입 ID 반환

#### 2.2 word_model.py 구현
- WordModel 클래스 (BaseModel 상속)
  - `get_all_words()`: 전체 단어 조회
  - `get_word_by_id(word_id)`: ID로 단어 조회
  - `search_words(keyword, search_type)`: 단어 검색
  - `add_word(english, korean, memo)`: 단어 추가
  - `update_word(word_id, **kwargs)`: 단어 수정
  - `delete_word(word_id)`: 단어 삭제
  - `toggle_favorite(word_id)`: 즐겨찾기 토글
  - `get_favorites()`: 즐겨찾기 목록 조회

#### 2.3 learning_model.py 구현
- LearningModel 클래스
  - `create_session(session_type, study_mode)`: 세션 생성
  - `end_session(session_id, stats)`: 세션 종료
  - `add_learning_history(session_id, word_id, is_correct, **kwargs)`: 학습 이력 추가
  - `get_session_history(session_id)`: 세션 이력 조회
  - `get_recent_sessions(limit)`: 최근 세션 조회

#### 2.4 exam_model.py 구현
- ExamModel 클래스
  - `create_exam(exam_type, question_mode, total_questions, **kwargs)`: 시험 생성
  - `save_exam_question(exam_id, word_id, question_number, **kwargs)`: 시험 문제 저장
  - `finish_exam(exam_id, score, time_taken)`: 시험 종료
  - `get_exam_history(limit)`: 시험 이력 조회
  - `get_exam_detail(exam_id)`: 시험 상세 조회

#### 2.5 statistics_model.py 구현
- StatisticsModel 클래스
  - `get_word_statistics(word_id)`: 단어별 통계 조회
  - `update_word_statistics(word_id, is_correct)`: 통계 업데이트
  - `get_daily_statistics(date)`: 일일 통계
  - `get_weekly_statistics(start_date, end_date)`: 주간 통계
  - `get_top_wrong_words(limit)`: 오답률 높은 단어

#### 2.6 settings_model.py 구현
- SettingsModel 클래스
  - `get_setting(key)`: 설정 조회
  - `set_setting(key, value)`: 설정 변경
  - `get_all_settings()`: 전체 설정 조회 (딕셔너리)

**테스트**:
- 각 Model별 기본 CRUD 동작 확인
- `tests/test_models.py`에 단위 테스트 작성

---

### Phase 3: 비즈니스 로직 계층 (2-3일)

**목표**: Controller 클래스 구현

#### 3.1 word_controller.py 구현
- WordController 클래스
  - `get_word_list(filter_favorite)`: 단어 목록 조회
  - `search_words(keyword, search_in)`: 단어 검색
  - `add_new_word(english, korean, memo)`: 단어 추가 (검증 포함)
  - `update_word(word_id, **kwargs)`: 단어 수정
  - `delete_word(word_id)`: 단어 삭제
  - `import_words_from_csv(file_path)`: CSV 임포트
  - `export_words_to_csv(file_path)`: CSV 엑스포트

#### 3.2 flashcard_controller.py 구현
- FlashcardController 클래스
  - `start_flashcard_session(mode, order, word_range)`: 세션 시작
  - `get_next_word()`: 다음 단어 가져오기
  - `submit_answer(word_id, is_correct, response_time)`: 답변 제출
  - `end_session()`: 세션 종료 및 결과 반환

#### 3.3 exam_controller.py 구현
- ExamController 클래스
  - `create_exam(exam_type, question_mode, num_questions, order)`: 시험 생성
  - `generate_choices(correct_word, num_choices)`: 객관식 선택지 생성
  - `submit_exam_answer(question_id, user_answer)`: 답안 제출
  - `finish_exam(exam_id)`: 시험 종료 및 채점
  - `get_exam_result(exam_id)`: 시험 결과 조회

#### 3.4 statistics_controller.py 구현
- StatisticsController 클래스
  - `get_today_summary()`: 오늘의 학습 요약
  - `get_weekly_progress()`: 주간 학습 진척도
  - `get_learning_trend(days)`: 학습 추세 (차트용)
  - `get_mastery_distribution()`: 숙지도 분포
  - `calculate_goal_achievement()`: 목표 달성률

#### 3.5 settings_controller.py 구현
- SettingsController 클래스
  - `get_settings()`: 전체 설정 조회
  - `update_setting(key, value)`: 설정 변경
  - `apply_theme(theme_mode)`: 테마 적용
  - `backup_database(backup_path)`: DB 백업
  - `restore_database(backup_path)`: DB 복원

**테스트**:
- 각 Controller별 비즈니스 로직 테스트
- `tests/test_controllers.py`에 테스트 작성

---

### Phase 4: UI 구현 (5-7일)

**목표**: PyQt5로 사용자 인터페이스 구현

#### 4.1 리소스 준비
- `resources/styles/light_theme.qss`: 라이트 모드 스타일시트
- `resources/styles/dark_theme.qss`: 다크 모드 스타일시트
- `resources/icons/`: 아이콘 이미지 (선택 - 기본 제공 아이콘 사용 가능)

#### 4.2 main_window.py 구현
- MainWindow 클래스 (QMainWindow)
  - `__init__()`: 윈도우 초기화
  - `init_ui()`: UI 컴포넌트 생성
  - `create_menu_bar()`: 메뉴바 생성
  - `create_status_bar()`: 상태바 생성
  - `create_tabs()`: 탭 위젯 생성
  - `load_theme()`: 테마 로드 (QSS 적용)
  - `update_status_bar()`: 상태바 업데이트

#### 4.3 단어 관리 탭 구현 (views/word_management/)
- `word_list_view.py`: WordListView 클래스
  - 단어 테이블 (QTableWidget)
  - 검색바, 필터 (QLineEdit, QCheckBox)
  - 버튼 (추가, 수정, 삭제, 즐겨찾기, 임포트, 엑스포트)
  - `load_words()`: 단어 목록 로드
  - `on_search()`: 검색 이벤트
  - `on_add_word()`: 단어 추가 다이얼로그 호출
  - `on_edit_word()`: 단어 수정 다이얼로그 호출
  - `on_delete_word()`: 단어 삭제 (확인 후)
  
- `word_edit_dialog.py`: WordEditDialog 클래스
  - 입력 필드 (영어, 한국어, 메모)
  - 즐겨찾기 체크박스
  - 저장/취소 버튼
  - `validate_input()`: 입력 검증
  - `get_data()`: 입력 데이터 반환

- `word_import_dialog.py`: WordImportDialog 클래스
  - 파일 선택 버튼
  - 미리보기 테이블
  - 중복 처리 옵션
  - `load_preview()`: CSV 미리보기
  - `import_data()`: 데이터 임포트

#### 4.4 플래시카드 탭 구현 (views/flashcard/)
- `flashcard_view.py`: FlashcardView 클래스
  - 학습 시작 화면 (설정 선택)
  - 플래시카드 영역 (QFrame)
  - 진행률 표시 (QProgressBar)
  - 버튼 (답 확인, 알고 있었음, 몰랐음, 즐겨찾기)
  - `start_learning()`: 학습 시작
  - `show_next_card()`: 다음 카드 표시
  - `flip_card()`: 카드 뒤집기 (애니메이션)
  - `on_answer()`: 답변 처리

#### 4.5 시험 탭 구현 (views/exam/)
- `exam_setup_view.py`: ExamSetupView 클래스
  - 시험 설정 옵션 (라디오 버튼, 스핀박스)
  - 시험 시작 버튼
  
- `exam_taking_view.py`: ExamTakingView 클래스
  - 문제 영역
  - 답변 입력/선택
  - 타이머 표시
  - 네비게이션 버튼 (이전, 다음, 제출)
  - 진행 상황 표시
  
- `exam_result_view.py`: ExamResultView 클래스
  - 점수 표시
  - 오답 목록
  - 버튼 (오답 다시 풀기, 시험 이력, 닫기)

- `wrong_note_view.py`: WrongNoteView 클래스
  - 오답 테이블
  - 필터 (미해결만 보기)
  - 버튼 (해결 처리, 오답 노트로 학습)

#### 4.6 통계 탭 구현 (views/statistics/)
- `statistics_view.py`: StatisticsView 클래스
  - 오늘의 학습 카드 (QGroupBox)
  - 4개 차트 영역 (matplotlib Canvas)
  - `load_statistics()`: 통계 데이터 로드
  - `draw_charts()`: 차트 그리기

- `charts.py`: 차트 헬퍼 함수
  - `draw_line_chart()`: 선 그래프
  - `draw_bar_chart()`: 막대 그래프
  - `draw_pie_chart()`: 파이 차트

#### 4.7 설정 탭 구현 (views/settings/)
- `settings_view.py`: SettingsView 클래스
  - 설정 입력 필드 (스핀박스, 라디오 버튼)
  - 데이터 관리 버튼 (백업, 복원)
  - 프로그램 정보
  - 저장/취소 버튼
  - `load_settings()`: 설정 로드
  - `save_settings()`: 설정 저장

#### 4.8 main.py 구현
- 애플리케이션 진입점
- DB 초기화 확인
- MainWindow 생성 및 실행
- 예외 처리

**테스트**:
- 각 화면 동작 확인
- 화면 전환 테스트
- 이벤트 처리 테스트

---

### Phase 5: 통합 및 테스트 (2-3일)

**목표**: 전체 기능 통합 및 버그 수정

#### 5.1 통합 테스트
- 전체 기능 시나리오 테스트
  - 단어 추가 → 학습 → 시험 → 통계 확인
  - CSV 임포트 → 데이터 확인
  - 설정 변경 → 적용 확인
- 오류 처리 테스트
  - 잘못된 입력 처리
  - DB 오류 처리
  - 파일 오류 처리

#### 5.2 버그 수정
- 발견된 버그 우선순위 분류
- 치명적 버그 우선 수정
- 사용성 개선

#### 5.3 성능 최적화
- 단어 목록 로딩 속도 최적화
- 통계 계산 최적화
- 메모리 사용 최적화

#### 5.4 문서화
- 코드 주석 보완
- 사용자 매뉴얼 작성 (간단 버전)
- README.md 작성

---

### Phase 6: 패키징 및 배포 (1일)

**목표**: 실행 파일 생성

#### 6.1 PyInstaller 설정
- `build.spec` 파일 작성
- 리소스 파일 포함 설정
- 아이콘 설정 (선택)

#### 6.2 빌드 및 테스트
- exe 파일 생성
- 다른 PC에서 실행 테스트
- 필요한 런타임 확인

#### 6.3 배포 준비
- 압축 파일 생성
- 간단한 설치 가이드 작성

---

## 4. 구현 일정

| Phase | 작업 내용 | 예상 소요 기간 | 누적 기간 |
|-------|----------|---------------|----------|
| 1 | 기반 구조 | 1-2일 | 1-2일 |
| 2 | 데이터 계층 | 2-3일 | 3-5일 |
| 3 | 비즈니스 로직 | 2-3일 | 5-8일 |
| 4 | UI 구현 | 5-7일 | 10-15일 |
| 5 | 통합 및 테스트 | 2-3일 | 12-18일 |
| 6 | 패키징 및 배포 | 1일 | 13-19일 |

**총 예상 기간**: 13-19일 (약 3-4주)

---

## 5. 구현 원칙

### 5.1 코드 작성 규칙
1. **파일 헤더**: 작성날짜, 파일위치, 목적 명시
2. **명명 규칙**: PEP 8 준수
3. **주석**: 주요 함수에 docstring 작성
4. **오류 처리**: try-except 블록 사용, 로그 기록

### 5.2 개발 방식
1. **단계별 구현**: 하나의 모듈 완성 후 다음 진행
2. **점진적 테스트**: 구현 후 즉시 테스트
3. **코드 리뷰**: 주요 기능 구현 후 검토

### 5.3 버전 관리
- 각 Phase 완료 시 커밋 (Git 사용 시)
- 주요 변경사항 CHANGELOG.md에 기록

---

## 6. 위험 요소 및 대응 방안

| 위험 요소 | 영향도 | 대응 방안 |
|----------|-------|----------|
| PyQt5 학습 곡선 | 중 | 공식 문서 및 예제 참조, 단순 기능부터 구현 |
| 플립 카드 애니메이션 구현 | 중 | QPropertyAnimation 예제 참조, 대안으로 단순 전환 |
| CSV 인코딩 이슈 | 낮 | UTF-8 강제, 오류 처리 강화 |
| matplotlib 통합 이슈 | 낮 | 공식 PyQt5 예제 참조 |
| 성능 이슈 (대량 데이터) | 중 | 페이징, 인덱싱 활용 |
| 패키징 실패 | 중 | 간단한 예제로 사전 테스트 |

---

## 7. 다음 단계

이 구현 계획서를 기반으로 **Phase 1: 기반 구조** 구현부터 시작합니다.

각 Phase 완료 시:
1. 구현 로그에 진행 상황 기록
2. 테스트 결과 확인
3. 다음 Phase 진행

**구현 시작 준비 완료** ✅

---

## 8. 변경 이력

| 날짜 | 버전 | 변경 내용 | 작성자 |
|------|------|-----------|--------|
| 2025-10-20 | v1.0 | 구현 계획서 초안 작성 | Team |

---

**작성 완료일**: 2025-10-20  
**문서 상태**: 최종 확정 ✅